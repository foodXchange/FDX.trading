/* Global application styles */

/* Blazor error UI - ensure it's properly styled and positioned */
#blazor-error-ui {
    background: lightyellow;
    border: 1px solid #ffc107;
    border-radius: 4px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    display: none !important; /* Force hide by default */
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 15px 20px;
    text-align: center;
    z-index: 10000;
    max-width: 400px;
}

/* Only show error UI when explicitly triggered */
#blazor-error-ui.blazor-error-active {
    display: block !important;
}

#blazor-error-ui .dismiss {
    cursor: pointer;
    position: absolute;
    right: 10px;
    top: 5px;
    font-size: 20px;
}

#blazor-error-ui .reload {
    color: #007bff;
    text-decoration: underline;
    cursor: pointer;
}

/* Ensure error overlays don't block content */
.error-overlay {
    pointer-events: none;
    opacity: 0.9;
}

/* Prevent text selection on error messages */
.error-message {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

/* MudBlazor overrides for better error handling */
.mud-snackbar-error {
    background-color: #d32f2f !important;
}

.mud-alert-error {
    border-left: 4px solid #d32f2f;
}

/* Ensure main content is always accessible */
.mud-main-content {
    position: relative;
    z-index: 1;
}

/* Help page specific styles */
.help-page-content {
    min-height: 80vh;
    position: relative;
}

/* Text rendering fixes */
* {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

/* Navigation menu fixes */
.mud-nav-link {
    text-rendering: optimizeLegibility;
    font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif !important;
    transform: translateZ(0); /* Force GPU acceleration */
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

/* Prevent text corruption in menus */
.mud-nav-group-header,
.mud-nav-link-text,
.mud-nav-group {
    font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif !important;
    letter-spacing: normal;
    word-spacing: normal;
    white-space: nowrap;
    transform: translateZ(0); /* Force GPU acceleration */
    -webkit-transform: translateZ(0);
}

/* Fix for MudBlazor navigation group titles */
.mud-nav-group > .mud-nav-link {
    font-family: inherit !important;
    transform: none;
}

/* Ensure proper rendering of special characters */
.mud-nav-group-header-text {
    unicode-bidi: normal;
    direction: ltr;
}

/* Fix for any potential text display issues */
.mud-typography {
    text-rendering: auto;
}

/* Ensure proper text encoding */
html {
    charset: "UTF-8";
}

/* Fix potential button text issues */
.mud-button-label {
    display: inline-block;
    line-height: normal;
}

/* Specific fixes for navigation menu text corruption */
.mud-navmenu .mud-nav-link-text {
    display: inline-block !important;
    font-weight: 400 !important;
    font-size: 0.875rem !important;
    line-height: 1.5 !important;
    letter-spacing: 0.00938em !important;
}

/* Force correct rendering of Admin text */
.mud-nav-group[title*="Admin"] .mud-nav-link-text,
.mud-nav-group[title*="admin"] .mud-nav-link-text {
    font-family: 'Roboto', sans-serif !important;
    font-weight: 500 !important;
}

/* Prevent character encoding issues */
.mud-navmenu {
    font-feature-settings: normal;
    -webkit-font-feature-settings: normal;
    -moz-font-feature-settings: normal;
}

/* Fix for overlapping or corrupted text */
.mud-nav-link {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Ensure icons don't interfere with text */
.mud-nav-link .mud-nav-link-icon + .mud-nav-link-text {
    margin-left: 32px;
}

/* Fix for MudSelect dropdown issues */
.mud-select {
    position: relative !important;
}

.mud-select-popover {
    z-index: 1400 !important;
    position: absolute !important;
}

.mud-popover {
    z-index: 1400 !important;
}

/* Ensure dropdowns are clickable */
.mud-select-input {
    cursor: pointer !important;
}

.mud-select-arrow {
    pointer-events: none;
}

.mud-select-item {
    cursor: pointer !important;
}

.mud-select-item:hover {
    background-color: rgba(0, 0, 0, 0.04);
}

/* Fix for overlapping elements */
.mud-overlay {
    z-index: 1300 !important;
}

/* Ensure proper layering of modals and dropdowns */
.mud-dialog-container {
    z-index: 1500 !important;
}

/* Fix dropdown positioning issues */
.mud-popover-anchor-top-center {
    transform-origin: center top !important;
}

.mud-popover-open {
    visibility: visible !important;
    opacity: 1 !important;
    transform: scale(1) !important;
}

/* Prevent text corruption in dropdowns */
.mud-list-item-text {
    font-family: 'Roboto', sans-serif !important;
    text-rendering: optimizeLegibility !important;
}

/* Fix for Account/Manage page specific issues */
.mud-input-outlined .mud-input-adornment {
    position: absolute;
}

/* Ensure form fields are properly styled */
.mud-input-control-input-container {
    position: relative;
}

/* Fix any potential encoding issues in form labels */
.mud-input-label {
    font-family: 'Roboto', sans-serif !important;
    text-rendering: auto !important;
}

/* Ensure proper interaction with select elements */
.mud-select .mud-input-slot {
    cursor: pointer !important;
}

.mud-select.mud-disabled .mud-input-slot {
    cursor: not-allowed !important;
}

/* Data Grid text rendering fixes */
.mud-table-cell {
    font-family: 'Roboto', 'Helvetica Neue', Arial, sans-serif !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

.mud-chip-label {
    font-family: 'Roboto', sans-serif !important;
    font-weight: 400 !important;
    letter-spacing: 0.0178571429em !important;
    line-height: 1.5 !important;
}

/* Ensure category chips are readable */
.mud-chip {
    white-space: nowrap !important;
    max-width: 250px !important;
}

.mud-chip .mud-chip-content {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: block !important;
}

/* Fix for truncated text in data grid */
.mud-table-cell .mud-chip {
    vertical-align: middle !important;
}

/* Ensure proper text display in table cells */
.mud-table tbody tr td {
    font-size: 0.875rem !important;
    line-height: 1.43 !important;
    letter-spacing: 0.01071em !important;
}

/* Fix for unclear text in data grid */
.mud-table-cell .mud-typography {
    color: rgba(0, 0, 0, 0.87) !important;
}

.mud-table-cell .text-muted {
    color: rgba(0, 0, 0, 0.54) !important;
    font-style: italic;
}

/* Ensure links in tables are visible */
.mud-table-cell .mud-link {
    color: #1976d2 !important;
    text-decoration: none !important;
}

.mud-table-cell .mud-link:hover {
    text-decoration: underline !important;
}

/* Fix data grid header text */
.mud-table-head .mud-table-cell {
    font-weight: 500 !important;
    color: rgba(0, 0, 0, 0.87) !important;
}

/* Ensure proper spacing in data grid cells */
.mud-table-cell-wrapper {
    padding: 16px !important;
}

/* Prevent text corruption in tooltips */
.mud-tooltip {
    font-family: 'Roboto', sans-serif !important;
    font-size: 0.75rem !important;
    letter-spacing: 0.03333em !important;
}

/* Fix for special characters in data */
.mud-table-cell,
.mud-chip-label,
.mud-tooltip {
    unicode-bidi: plaintext !important;
}

/* Button text visibility fixes */
.mud-button {
    position: relative !important;
    z-index: 1 !important;
}

.mud-button .mud-button-label {
    position: relative !important;
    z-index: 2 !important;
    color: inherit !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 100% !important;
}

/* Fix for button background/text layering */
.mud-button-filled {
    overflow: visible !important;
}

.mud-button-filled .mud-button-label {
    z-index: 10 !important;
}

/* Ensure button clicks work */
.mud-button,
.mud-icon-button {
    pointer-events: auto !important;
    cursor: pointer !important;
}

.mud-button:disabled,
.mud-icon-button:disabled {
    pointer-events: none !important;
    cursor: not-allowed !important;
}

/* Fix dropdown text in select fields */
.mud-select .mud-input-slot {
    z-index: 2 !important;
    background-color: transparent !important;
}

.mud-select-text {
    position: relative !important;
    z-index: 3 !important;
}

/* Fix overlapping text issues */
.mud-alert {
    position: relative !important;
    z-index: 100 !important;
}

.mud-alert-message {
    position: relative !important;
    z-index: 101 !important;
}

/* Fix table action buttons */
.mud-table-cell .mud-icon-button {
    z-index: 5 !important;
    position: relative !important;
}

/* Fix filter button text visibility */
.mud-chip {
    position: relative !important;
    overflow: visible !important;
}

.mud-chip .mud-chip-content {
    position: relative !important;
    z-index: 2 !important;
    color: inherit !important;
}

/* Fix pagination buttons */
.mud-table-pagination .mud-button,
.mud-table-pagination .mud-icon-button {
    z-index: 5 !important;
    position: relative !important;
}

/* Fix dialog form fields */
.mud-dialog .mud-select,
.mud-dialog .mud-input {
    position: relative !important;
}

.mud-dialog .mud-input-control {
    z-index: 1 !important;
}

/* Fix help page text overlapping */
.faq-item {
    position: relative !important;
    margin-bottom: 1rem !important;
}

.faq-item h3 {
    position: relative !important;
    z-index: 2 !important;
}

/* Fix error message visibility */
.mud-snackbar {
    z-index: 2000 !important;
}

/* Ensure all interactive elements are clickable */
a, button, [role="button"], .mud-button, .mud-icon-button {
    position: relative !important;
}

/* Fix text rendering on colored backgrounds */
.mud-button-filled-primary .mud-button-label,
.mud-button-filled-secondary .mud-button-label,
.mud-button-filled-success .mud-button-label {
    color: white !important;
    text-shadow: none !important;
}

/* Fix loading states */
.mud-progress-linear {
    position: relative !important;
    z-index: 10 !important;
}

/* Ensure proper layering in forms */
.mud-form-control {
    position: relative !important;
}

/* Fix text input fields */
.mud-input-outlined-border {
    z-index: 1 !important;
}

.mud-input-slot {
    z-index: 2 !important;
    position: relative !important;
}