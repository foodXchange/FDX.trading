@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager NavigationManager
@inject AuthenticationStateProvider AuthenticationStateProvider

<MudNavMenu>
    <AuthorizeView>
        <Authorized>
            <!-- Supplier Dashboard -->
            <MudNavLink Href="/portal/supplier/dashboard" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Dashboard">
                Dashboard
            </MudNavLink>
            
            <!-- Company Management -->
            <MudNavGroup Title="Company" Icon="@Icons.Material.Filled.Business" Expanded="false">
                <MudNavLink Href="/portal/supplier/profile" Icon="@Icons.Material.Filled.AccountBox">
                    Company Profile
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/certifications" Icon="@Icons.Material.Filled.VerifiedUser">
                    Certifications
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/contacts" Icon="@Icons.Material.Filled.ContactPhone">
                    Contacts
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/documents" Icon="@Icons.Material.Filled.Description">
                    Documents
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Products -->
            <MudNavGroup Title="Products" Icon="@Icons.Material.Filled.Inventory" Expanded="true">
                <MudNavLink Href="/portal/supplier/products" Icon="@Icons.Material.Filled.List">
                    Product Catalog
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/products/add" Icon="@Icons.Material.Filled.Add">
                    Add Product
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/products/import" Icon="@Icons.Material.Filled.Upload">
                    Import Products
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/products/categories" Icon="@Icons.Material.Filled.Category">
                    Categories
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Business Operations -->
            <MudNavGroup Title="Business" Icon="@Icons.Material.Filled.BusinessCenter" Expanded="false">
                <MudNavLink Href="/portal/supplier/rfqs" Icon="@Icons.Material.Filled.RequestQuote">
                    RFQ Requests
                    <MudChip T="string" Size="Size.Small" Color="Color.Warning" Class="ml-2">18</MudChip>
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/quotes" Icon="@Icons.Material.Filled.Receipt">
                    My Quotes
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/orders" Icon="@Icons.Material.Filled.ShoppingCart">
                    Orders
                    <MudChip T="string" Size="Size.Small" Color="Color.Success" Class="ml-2">34</MudChip>
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/buyers" Icon="@Icons.Material.Filled.People">
                    My Buyers
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Analytics -->
            <MudNavGroup Title="Analytics" Icon="@Icons.Material.Filled.Analytics" Expanded="false">
                <MudNavLink Href="/portal/supplier/analytics/sales" Icon="@Icons.Material.Filled.TrendingUp">
                    Sales Report
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/analytics/products" Icon="@Icons.Material.Filled.BarChart">
                    Product Performance
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/analytics/buyers" Icon="@Icons.Material.Filled.PieChart">
                    Buyer Analysis
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Email & Communications -->
            <MudNavGroup Title="Email & Communications" Icon="@Icons.Material.Filled.Email" Expanded="false">
                <MudNavLink Href="/support/email-inbox" Icon="@Icons.Material.Filled.Inbox">
                    Email Inbox
                    <MudChip T="string" Size="Size.Small" Color="Color.Warning" Class="ml-2">7</MudChip>
                </MudNavLink>
                <MudNavLink Href="/support/email-compose" Icon="@Icons.Material.Filled.Edit">
                    Compose Email
                </MudNavLink>
                <MudNavLink Href="/portal/supplier/messages" Icon="@Icons.Material.Filled.Message">
                    Messages
                    <MudChip T="string" Size="Size.Small" Color="Color.Info" Class="ml-2">5</MudChip>
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Settings -->
            <MudNavLink Href="/portal/supplier/settings" Icon="@Icons.Material.Filled.Settings">
                Settings
            </MudNavLink>
            
            <MudDivider Class="my-2" />
            
            <!-- Account Management -->
            <MudNavLink Href="/Account/Manage" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AccountCircle">
                My Account
            </MudNavLink>
            
            <!-- Logout -->
            <form action="Account/Logout" method="post">
                <AntiforgeryToken />
                <input type="hidden" name="ReturnUrl" value="@currentUrl" />
                <button type="submit" class="mud-nav-link mud-ripple">
                    <MudIcon Icon="@Icons.Material.Filled.Logout" Color="Color.Error" Class="mr-3"></MudIcon>
                    Sign Out
                </button>
            </form>
        </Authorized>
    </AuthorizeView>
</MudNavMenu>

@code {
    private string? currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
    }
}