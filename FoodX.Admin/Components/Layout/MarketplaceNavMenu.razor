@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager NavigationManager
@inject AuthenticationStateProvider AuthenticationStateProvider

<MudNavMenu>
    <AuthorizeView>
        <Authorized>
            <!-- Marketplace Dashboard -->
            <MudNavLink Href="/portal/marketplace/dashboard" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Dashboard">
                Marketplace Overview
            </MudNavLink>
            
            <!-- Browse & Discover -->
            <MudNavGroup Title="Browse" Icon="@Icons.Material.Filled.Explore" Expanded="true">
                <MudNavLink Href="/portal/marketplace/categories" Icon="@Icons.Material.Filled.Category">
                    All Categories
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/featured" Icon="@Icons.Material.Filled.Stars">
                    Featured Products
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/new" Icon="@Icons.Material.Filled.NewReleases">
                    New Arrivals
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/deals" Icon="@Icons.Material.Filled.LocalOffer">
                    Special Deals
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Suppliers -->
            <MudNavGroup Title="Suppliers" Icon="@Icons.Material.Filled.Store" Expanded="false">
                <MudNavLink Href="/portal/marketplace/suppliers/all" Icon="@Icons.Material.Filled.ViewList">
                    All Suppliers
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/suppliers/verified" Icon="@Icons.Material.Filled.VerifiedUser">
                    Verified Suppliers
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/suppliers/premium" Icon="@Icons.Material.Filled.WorkspacePremium">
                    Premium Suppliers
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/suppliers/map" Icon="@Icons.Material.Filled.Map">
                    Supplier Map
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Trading -->
            <MudNavGroup Title="Trading" Icon="@Icons.Material.Filled.SwapHoriz" Expanded="false">
                <MudNavLink Href="/portal/marketplace/rfq-board" Icon="@Icons.Material.Filled.Dashboard">
                    RFQ Board
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/quotes" Icon="@Icons.Material.Filled.RequestQuote">
                    Public Quotes
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/auctions" Icon="@Icons.Material.Filled.Gavel">
                    Live Auctions
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/bulk-deals" Icon="@Icons.Material.Filled.Inventory2">
                    Bulk Deals
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Market Intelligence -->
            <MudNavGroup Title="Intelligence" Icon="@Icons.Material.Filled.Insights" Expanded="false">
                <MudNavLink Href="/portal/marketplace/trends" Icon="@Icons.Material.Filled.TrendingUp">
                    Market Trends
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/prices" Icon="@Icons.Material.Filled.PriceCheck">
                    Price Index
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/reports" Icon="@Icons.Material.Filled.Assessment">
                    Industry Reports
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/news" Icon="@Icons.Material.Filled.Newspaper">
                    Market News
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Services -->
            <MudNavGroup Title="Services" Icon="@Icons.Material.Filled.Handshake" Expanded="false">
                <MudNavLink Href="/portal/marketplace/logistics" Icon="@Icons.Material.Filled.LocalShipping">
                    Logistics Partners
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/finance" Icon="@Icons.Material.Filled.AccountBalance">
                    Trade Finance
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/insurance" Icon="@Icons.Material.Filled.Security">
                    Insurance
                </MudNavLink>
                <MudNavLink Href="/portal/marketplace/quality" Icon="@Icons.Material.Filled.VerifiedUser">
                    Quality Assurance
                </MudNavLink>
            </MudNavGroup>
            
            <!-- Community -->
            <MudNavLink Href="/portal/marketplace/events" Icon="@Icons.Material.Filled.Event">
                Trade Events
            </MudNavLink>
            
            <MudNavLink Href="/portal/marketplace/forum" Icon="@Icons.Material.Filled.Forum">
                Community Forum
            </MudNavLink>
            
            <MudDivider Class="my-2" />
            
            <!-- Account Management -->
            <MudNavLink Href="/Account/Manage" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AccountCircle">
                My Account
            </MudNavLink>
            
            <!-- Logout -->
            <form action="Account/Logout" method="post">
                <AntiforgeryToken />
                <input type="hidden" name="ReturnUrl" value="@currentUrl" />
                <button type="submit" class="mud-nav-link mud-ripple">
                    <MudIcon Icon="@Icons.Material.Filled.Logout" Color="Color.Error" Class="mr-3"></MudIcon>
                    Sign Out
                </button>
            </form>
        </Authorized>
    </AuthorizeView>
</MudNavMenu>

@code {
    private string? currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
    }
}